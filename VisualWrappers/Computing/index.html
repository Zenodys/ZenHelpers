<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>    
<script src="main.js"></script>
<script>if (window.module) module = window.module;</script>

<button id="visualisations">Visualisations</button>
<button id="startEngine">Start</button>
<button id="stopEngine">Stop</button>

<button id="saveAddress">Save</button>
<input id="txtAddress" />

<div id="message"></div>
    	
<script type="text/javascript">
 
    const ipcRenderer = require('electron').ipcRenderer; 
    
    function ReadAddress()
    {
        const fs = require('fs');

        if (!fs.existsSync("ZenEngine/address"))
            return '';

        return fs.readFileSync("ZenEngine/address");
    }

    $('#saveAddress').click(function() {
        const fs = require('fs');    
        
        fs.writeFile("ZenEngine/address", $('#txtAddress').val() ,
            function(err) {
                if(err)
                    alert('Error in saving address!');
                else
                    alert("Address saved!");
            });
    });

    $('#startEngine').click(function() {
        ipcRenderer.send("startEngine");
    });

    $('#stopEngine').click(function() {
        ipcRenderer.send("stopEngine");
    });

    $('#visualisations').click(function() {
        ipcRenderer.send("showVisualisations");
    });
    
    //*******************   START ZEN ENGINE EVENT HANDLERS ****************//
    ipcRenderer.on('onZenEngineOutput', function(event,param) {
        $("#message").append(param + "<br/>");
    });

    ipcRenderer.on('onZenEngineExit', function(event,param) {
        $("#message").append("Engine process exited.....<br/>");
    });

    ipcRenderer.on('onZenEngineError', function(event,param) {
        $("#message").append("Engine process throw error.....<br/>" + param);
    });
    //*******************   END ZEN ENGINE EVENT HANDLERS ****************//
    
    $('#txtAddress').val(ReadAddress());

</script>